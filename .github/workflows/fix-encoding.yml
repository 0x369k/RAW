name: Fix Encoding Issues

on:
  push:
    paths:
      - "docs/**"  # Pr√ºft alle √Ñnderungen im "docs"-Ordner
  workflow_dispatch: # Manuelles Starten der Action m√∂glich

jobs:
  fix_encoding:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: √úberpr√ºfe und fixe Encoding-Fehler
        run: |
          for file in $(find docs -type f); do
            echo "üîç Pr√ºfe Datei: $file"
            
            # Erstelle eine Backup-Kopie f√ºr den Vergleich
            cp "$file" "$file.bak"
            
            # Erzwinge UTF-8 ohne BOM und korrigiere Fehler
            iconv -f utf-8 -t utf-8 "$file" -o "$file" || echo "‚ö† Fehler bei $file"

            # Pr√ºfe, ob √Ñnderungen vorgenommen wurden
            if ! cmp -s "$file" "$file.bak"; then
              echo "‚úÖ Datei $file wurde korrigiert!"
              git add "$file"
            fi

            # Entferne Backup-Datei
            rm "$file.bak"
          done


